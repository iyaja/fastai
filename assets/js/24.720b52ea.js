(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{373:function(t,a,e){"use strict";e.r(a);var s=e(42),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"external-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#external-data"}},[t._v("#")]),t._v(" External data")]),t._v(" "),e("blockquote",[e("p",[t._v("Helper functions to download the fastai datasets")])]),t._v(" "),e("p",[t._v("A complete list of datasets that are available by default inside the library are:")]),t._v(" "),e("p",[e("strong",[t._v("Main datasets")]),t._v(":")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("ADULT_SAMPLE")]),t._v(": A small of the "),e("a",{attrs:{href:"https://archive.ics.uci.edu/ml/datasets/Adult",target:"_blank",rel:"noopener noreferrer"}},[t._v("adults dataset"),e("OutboundLink")],1),t._v(" to  predict whether income exceeds $50K/yr based on census data.")])]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("BIWI_SAMPLE")]),t._v(": A "),e("a",{attrs:{href:"https://www.kaggle.com/kmader/biwi-kinect-head-pose-database",target:"_blank",rel:"noopener noreferrer"}},[t._v("BIWI kinect headpose database"),e("OutboundLink")],1),t._v(". The dataset contains over 15K images of 20 people (6 females and 14 males - 4 people were recorded twice). For each frame, a depth image, the corresponding rgb image (both 640x480 pixels), and the annotation is provided. The head pose range covers about +-75 degrees yaw and +-60 degrees pitch.")])]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("CIFAR")]),t._v(": The famous "),e("a",{attrs:{href:"https://www.cs.toronto.edu/~kriz/cifar.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("cifar-10"),e("OutboundLink")],1),t._v(" dataset which consists of 60000 32x32 colour images in 10 classes, with 6000 images per class.")]),t._v(" "),e("li",[e("strong",[t._v("COCO_SAMPLE")]),t._v(": A sample of the "),e("a",{attrs:{href:"http://cocodataset.org/#home",target:"_blank",rel:"noopener noreferrer"}},[t._v("coco dataset"),e("OutboundLink")],1),t._v(" for object detection.")]),t._v(" "),e("li",[e("strong",[t._v("COCO_TINY")]),t._v(": A tiny version of the "),e("a",{attrs:{href:"http://cocodataset.org/#home",target:"_blank",rel:"noopener noreferrer"}},[t._v("coco dataset"),e("OutboundLink")],1),t._v(" for object detection.")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("HUMAN_NUMBERS")]),t._v(": A synthetic dataset consisting of human number counts in text such as one, two, three, four.. Useful for experimenting with Language Models.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMDB")]),t._v(": The full "),e("a",{attrs:{href:"https://ai.stanford.edu/~amaas/data/sentiment/",target:"_blank",rel:"noopener noreferrer"}},[t._v("IMDB sentiment analysis dataset"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMDB_SAMPLE")]),t._v(": A sample of the full "),e("a",{attrs:{href:"https://ai.stanford.edu/~amaas/data/sentiment/",target:"_blank",rel:"noopener noreferrer"}},[t._v("IMDB sentiment analysis dataset"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("ML_SAMPLE")]),t._v(": A movielens sample dataset for recommendation engines to recommend movies to users.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("ML_100k")]),t._v(": The movielens 100k dataset for recommendation engines to recommend movies to users.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("MNIST_SAMPLE")]),t._v(": A sample of the famous "),e("a",{attrs:{href:"http://yann.lecun.com/exdb/mnist/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MNIST dataset"),e("OutboundLink")],1),t._v(" consisting of handwritten digits.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("MNIST_TINY")]),t._v(": A tiny version of the famous "),e("a",{attrs:{href:"http://yann.lecun.com/exdb/mnist/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MNIST dataset"),e("OutboundLink")],1),t._v(" consisting of handwritten digits.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("MNIST_VAR_SIZE_TINY")]),t._v(":")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("PLANET_SAMPLE")]),t._v(": A sample of the planets dataset from the Kaggle competition "),e("a",{attrs:{href:"https://www.kaggle.com/c/planet-understanding-the-amazon-from-space",target:"_blank",rel:"noopener noreferrer"}},[t._v("Planet: Understanding the Amazon from Space"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("PLANET_TINY")]),t._v(": A tiny version  of the planets dataset from the Kaggle competition "),e("a",{attrs:{href:"https://www.kaggle.com/c/planet-understanding-the-amazon-from-space",target:"_blank",rel:"noopener noreferrer"}},[t._v("Planet: Understanding the Amazon from Space"),e("OutboundLink")],1),t._v(" for faster experimentation and prototyping.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMAGENETTE")]),t._v(": A smaller version of the "),e("a",{attrs:{href:"http://www.image-net.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("imagenet dataset"),e("OutboundLink")],1),t._v(" pronounced just like 'Imagenet', except with a corny inauthentic French accent.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMAGENETTE_160")]),t._v(": The 160px version of the Imagenette dataset.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMAGENETTE_320")]),t._v(": The 320px version of the Imagenette dataset.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMAGEWOOF")]),t._v(": Imagewoof is a subset of 10 classes from Imagenet that aren't so easy to classify, since they're all dog breeds.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMAGEWOOF_160")]),t._v(": 160px version of the ImageWoof dataset.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMAGEWOOF_320")]),t._v(": 320px version of the ImageWoof dataset.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMAGEWANG")]),t._v(": Imagewang contains Imagenette and Imagewoof combined, but with some twists that make it into a tricky semi-supervised unbalanced classification problem")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMAGEWANG_160")]),t._v(": 160px version of Imagewang.")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("IMAGEWANG_320")]),t._v(": 320px version of Imagewang.")])])]),t._v(" "),e("p",[e("strong",[t._v("Kaggle competition datasets")]),t._v(":")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("DOGS")]),t._v(": Image dataset consisting of dogs and cats images from "),e("a",{attrs:{href:"https://www.kaggle.com/c/dogs-vs-cats",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dogs vs Cats kaggle competition"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("p",[e("strong",[t._v("Image Classification datasets")]),t._v(":")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("CALTECH_101")]),t._v(": Pictures of objects belonging to 101 categories. About 40 to 800 images per category. Most categories have about 50 images. Collected in September 2003 by Fei-Fei Li, Marco Andreetto, and Marc 'Aurelio Ranzato.")]),t._v(" "),e("li",[t._v("CARS: The "),e("a",{attrs:{href:"https://ai.stanford.edu/~jkrause/cars/car_dataset.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cars dataset"),e("OutboundLink")],1),t._v(" contains 16,185 images of 196 classes of cars.")]),t._v(" "),e("li",[e("strong",[t._v("CIFAR_100")]),t._v(": The CIFAR-100 dataset consists of 60000 32x32 colour images in 100 classes, with 600 images per class.")]),t._v(" "),e("li",[e("strong",[t._v("CUB_200_2011")]),t._v(": Caltech-UCSD Birds-200-2011 (CUB-200-2011) is an extended version of the CUB-200 dataset, with roughly double the number of images per class and new part location annotations")]),t._v(" "),e("li",[e("strong",[t._v("FLOWERS")]),t._v(": 17 category "),e("a",{attrs:{href:"http://www.robots.ox.ac.uk/~vgg/data/flowers/",target:"_blank",rel:"noopener noreferrer"}},[t._v("flower dataset"),e("OutboundLink")],1),t._v(" by gathering images from various websites.")]),t._v(" "),e("li",[e("strong",[t._v("FOOD")]),t._v(":")]),t._v(" "),e("li",[e("strong",[t._v("MNIST")]),t._v(": "),e("a",{attrs:{href:"http://yann.lecun.com/exdb/mnist/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MNIST dataset"),e("OutboundLink")],1),t._v(" consisting of handwritten digits.")]),t._v(" "),e("li",[e("strong",[t._v("PETS")]),t._v(": A 37 category "),e("a",{attrs:{href:"https://www.robots.ox.ac.uk/~vgg/data/pets/",target:"_blank",rel:"noopener noreferrer"}},[t._v("pet dataset"),e("OutboundLink")],1),t._v(" with roughly 200 images for each class.")])]),t._v(" "),e("p",[e("strong",[t._v("NLP datasets")]),t._v(":")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("AG_NEWS")]),t._v(": The AG News corpus consists of news articles from the AGâ€™s corpus of news articles on the web pertaining to the 4 largest classes. The dataset contains 30,000 training and 1,900 testing examples for each class.")]),t._v(" "),e("li",[e("strong",[t._v("AMAZON_REVIEWS")]),t._v(": This dataset contains product reviews and metadata from Amazon, including 142.8 million reviews spanning May 1996 - July 2014.")]),t._v(" "),e("li",[e("strong",[t._v("AMAZON_REVIEWS_POLARITY")]),t._v(": Amazon reviews dataset for sentiment analysis.")]),t._v(" "),e("li",[e("strong",[t._v("DBPEDIA")]),t._v(": The DBpedia ontology dataset contains 560,000 training samples and 70,000 testing samples for each of 14 nonoverlapping classes from DBpedia.")]),t._v(" "),e("li",[e("strong",[t._v("MT_ENG_FRA")]),t._v(": Machine translation dataset from English to French.")]),t._v(" "),e("li",[e("strong",[t._v("SOGOU_NEWS")]),t._v(": "),e("a",{attrs:{href:"http://www.thuir.cn/data-srr/",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Sogou-SRR"),e("OutboundLink")],1),t._v(" (Search Result Relevance) dataset was constructed to support researches on search engine relevance estimation and ranking tasks.")]),t._v(" "),e("li",[e("strong",[t._v("WIKITEXT")]),t._v(": The "),e("a",{attrs:{href:"https://blog.einstein.ai/the-wikitext-long-term-dependency-language-modeling-dataset/",target:"_blank",rel:"noopener noreferrer"}},[t._v("WikiText language modeling dataset"),e("OutboundLink")],1),t._v(" is a collection of over 100 million tokens extracted from the set of verified Good and Featured articles on Wikipedia.")]),t._v(" "),e("li",[e("strong",[t._v("WIKITEXT_TINY")]),t._v(": A tiny version of the WIKITEXT dataset.")]),t._v(" "),e("li",[e("strong",[t._v("YAHOO_ANSWERS")]),t._v(": YAHOO's question answers dataset.")]),t._v(" "),e("li",[e("strong",[t._v("YELP_REVIEWS")]),t._v(": The "),e("a",{attrs:{href:"https://www.yelp.com/dataset",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yelp dataset"),e("OutboundLink")],1),t._v(" is a subset of YELP businesses, reviews, and user data for use in personal, educational, and academic purposes")]),t._v(" "),e("li",[e("strong",[t._v("YELP_REVIEWS_POLARITY")]),t._v(": For sentiment classification on YELP reviews.")])]),t._v(" "),e("p",[e("strong",[t._v("Image localization datasets")]),t._v(":")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("BIWI_HEAD_POSE")]),t._v(": A "),e("a",{attrs:{href:"https://www.kaggle.com/kmader/biwi-kinect-head-pose-database",target:"_blank",rel:"noopener noreferrer"}},[t._v("BIWI kinect headpose database"),e("OutboundLink")],1),t._v(". The dataset contains over 15K images of 20 people (6 females and 14 males - 4 people were recorded twice). For each frame, a depth image, the corresponding rgb image (both 640x480 pixels), and the annotation is provided. The head pose range covers about +-75 degrees yaw and +-60 degrees pitch.")]),t._v(" "),e("li",[e("strong",[t._v("CAMVID")]),t._v(": Consists of driving labelled dataset for segmentation type models.")]),t._v(" "),e("li",[e("strong",[t._v("CAMVID_TINY")]),t._v(": A tiny camvid dataset for segmentation type models.")]),t._v(" "),e("li",[e("strong",[t._v("LSUN_BEDROOMS")]),t._v(": "),e("a",{attrs:{href:"https://arxiv.org/abs/1506.03365",target:"_blank",rel:"noopener noreferrer"}},[t._v("Large-scale Image Dataset"),e("OutboundLink")],1),t._v(" using Deep Learning with Humans in the Loop")]),t._v(" "),e("li",[e("strong",[t._v("PASCAL_2007")]),t._v(": "),e("a",{attrs:{href:"http://host.robots.ox.ac.uk/pascal/VOC/voc2007/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pascal 2007 dataset"),e("OutboundLink")],1),t._v(" to recognize objects from a number of visual object classes in realistic scenes.")]),t._v(" "),e("li",[e("strong",[t._v("PASCAL_2012")]),t._v(": "),e("a",{attrs:{href:"http://host.robots.ox.ac.uk/pascal/VOC/voc2012/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pascal 2012 dataset"),e("OutboundLink")],1),t._v(" to recognize objects from a number of visual object classes in realistic scenes.")])]),t._v(" "),e("p",[e("strong",[t._v("Audio classification")]),t._v(":")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("MACAQUES")]),t._v(": "),e("a",{attrs:{href:"https://datadryad.org/stash/dataset/doi:10.5061/dryad.7f4p9",target:"_blank",rel:"noopener noreferrer"}},[t._v("7285 macaque coo calls"),e("OutboundLink")],1),t._v(" across 8 individuals from "),e("a",{attrs:{href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4806230",target:"_blank",rel:"noopener noreferrer"}},[t._v("Distributed acoustic cues for caller identity in macaque vocalization"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("li",[e("strong",[t._v("ZEBRA_FINCH")]),t._v(": "),e("a",{attrs:{href:"https://ndownloader.figshare.com/articles/11905533/versions/1",target:"_blank",rel:"noopener noreferrer"}},[t._v("3405 zebra finch calls"),e("OutboundLink")],1),t._v(" classified "),e("a",{attrs:{href:"https://link.springer.com/article/10.1007/s10071-015-0933-6",target:"_blank",rel:"noopener noreferrer"}},[t._v("across 11 call types"),e("OutboundLink")],1),t._v(". Additional labels include name of individual making the vocalization and its age.")])]),t._v(" "),e("p",[e("strong",[t._v("Medical Imaging datasets")]),t._v(":")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("SIIM_SMALL")]),t._v(": A smaller version of the "),e("a",{attrs:{href:"https://www.kaggle.com/c/siim-acr-pneumothorax-segmentation/overview",target:"_blank",rel:"noopener noreferrer"}},[t._v("SIIM dataset"),e("OutboundLink")],1),t._v(" where the objective is to classify pneumothorax from a set of chest radiographic images.")])]),t._v(" "),e("p",[e("strong",[t._v("Pretrained models")]),t._v(":")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("OPENAI_TRANSFORMER")]),t._v(": The GPT2 Transformer pretrained weights.")]),t._v(" "),e("li",[e("strong",[t._v("WT103_FWD")]),t._v(": The WikiText-103 forward language model weights.")]),t._v(" "),e("li",[e("strong",[t._v("WT103_BWD")]),t._v(": The WikiText-103 backward language model weights.")])]),t._v(" "),e("p",[t._v("To download any of the datasets or pretrained weights, simply run "),e("RouterLink",{attrs:{to:"/data.external.html#untar_data"}},[e("code",[t._v("untar_data")])]),t._v(" by passing any dataset name mentioned above like so:")],1),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("path "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" untar_data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PETS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\npath"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ls"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#7393) [Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/keeshond_34.jpg'),Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/Siamese_178.jpg'),Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/german_shorthaired_94.jpg'),Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/Abyssinian_92.jpg'),Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/basset_hound_111.jpg'),Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/Russian_Blue_194.jpg'),Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/staffordshire_bull_terrier_91.jpg'),Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/Persian_69.jpg'),Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/english_setter_33.jpg'),Path('/home/ubuntu/.fastai/data/oxford-iiit-pet/images/Russian_Blue_155.jpg')...]")]),t._v("\n")])])]),e("p",[t._v("To download model pretrained weights:```python path = untar_data(URLs.PETS)\npath.ls()")]),t._v(" "),e("blockquote",[e("blockquote",[e("p",[t._v("(#2) [Path('/home/ubuntu/.fastai/data/wt103-bwd/itos_wt103.pkl'),Path('/home/ubuntu/.fastai/data/wt103-bwd/lstm_bwd.pth')]")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('\n\n<h2 id="Config" class="doc_header"><code>class</code> <code>Config</code><a href="https://github.com/fastai/fastai/tree/master/fastai/data/external.py#L10" class="source_link" style="float:right">[source]</a></h2>\n\n> <code>Config</code>()\n\nSetup config at `~/.fastai` unless it exists already.\n\n\nIf a config file doesn\'t exist already, it is always created at `~/.fastai/config.yml` location by default whenever an instance of the [`Config`](/data.external.html#Config) class is created. Here is a quick example to explain: \n\n```python\nconfig_file = Path("~/.fastai/config.yml").expanduser()\nif config_file.exists(): os.remove(config_file)\nassert not config_file.exists()\n\nconfig = Config()\nassert config_file.exists()\n')])])]),e("p",[t._v("The config is now available as "),e("code",[t._v("config.d")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("{'archive_path': '/home/jhoward/.fastai/archive',\n 'data_path': '/home/jhoward/.fastai/data',\n 'model_path': '/home/jhoward/.fastai/models',\n 'storage_path': '/tmp',\n 'version': 2}\n")])])]),e("p",[t._v("As can be seen, this is a basic config file that consists of "),e("code",[t._v("data_path")]),t._v(", "),e("code",[t._v("model_path")]),t._v(", "),e("code",[t._v("storage_path")]),t._v(" and "),e("code",[t._v("archive_path")]),t._v(".\nAll future downloads occur at the paths defined in the config file based on the type of download. For example, all future fastai datasets are downloaded to the "),e("code",[t._v("data_path")]),t._v(" while all pretrained model weights are download to "),e("code",[t._v("model_path")]),t._v(" unless the default download location is updated.")]),t._v(" "),e("p",[t._v("Please note that it is possible to update the default path locations in the config file. Let's first create a backup of the config file, then update the config to show the changes and re update the new config with the backup file.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" config_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" shutil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("move"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config_bak"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'archive_path'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("config "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("{'archive_path': '.',\n 'data_archive_path': '/home/jhoward/.fastai/data',\n 'data_path': '/home/jhoward/.fastai/data',\n 'model_path': '/home/jhoward/.fastai/models',\n 'storage_path': '/tmp',\n 'version': 2}\n")])])]),e("p",[t._v("The "),e("code",[t._v("archive_path")]),t._v(" has been updated to "),e("code",[t._v('"."')]),t._v(". Now let's remove any updates we made to Config file that we made for the purpose of this example.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" config_bak"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" shutil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("move"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config_bak"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconfig "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("{'archive_path': '/home/jhoward/.fastai/archive',\n 'data_archive_path': '/home/jhoward/.fastai/data',\n 'data_path': '/home/jhoward/.fastai/data',\n 'model_path': '/home/jhoward/.fastai/models',\n 'storage_path': '/tmp',\n 'version': 2}\n")])])]),e("h2",{staticClass:"doc_header",attrs:{id:"URLs"}},[e("code",[t._v("class")]),t._v(" "),e("code",[t._v("URLs")]),e("a",{staticClass:"source_link",staticStyle:{float:"right"},attrs:{href:"https://github.com/fastai/fastai/tree/master/fastai/data/external.py#L59"}},[t._v("[source]")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("URLs")]),t._v("()")])]),t._v(" "),e("p",[t._v("Global constants for dataset and model URLs.")]),t._v(" "),e("p",[t._v("The default local path is at "),e("code",[t._v("~/.fastai/archive/")]),t._v(" but this can be updated by passing a different "),e("code",[t._v("c_key")]),t._v(". Note: "),e("code",[t._v("c_key")]),t._v(" should be one of "),e("code",[t._v("'archive_path', 'data_archive_path', 'data_path', 'model_path', 'storage_path'")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("url "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PETS\nlocal_path "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntest_eq"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("local_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'archive'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \nlocal_path\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("Path('/home/jhoward/.fastai/archive/oxford-iiit-pet.tgz')\n")])])]),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("local_path "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c_key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'model'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntest_eq"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("local_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'model'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlocal_path\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("Path('/home/jhoward/.fastai/models/oxford-iiit-pet.tgz')\n")])])]),e("h2",{attrs:{id:"downloading"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#downloading"}},[t._v("#")]),t._v(" Downloading")]),t._v(" "),e("h4",{staticClass:"doc_header",attrs:{id:"download_url"}},[e("code",[t._v("download_url")]),e("a",{staticClass:"source_link",staticStyle:{float:"right"},attrs:{href:"https://github.com/fastai/fastai/tree/master/fastai/data/external.py#L154"}},[t._v("[source]")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("download_url")]),t._v("("),e("strong",[e("code",[t._v("url")])]),t._v(", "),e("strong",[e("code",[t._v("dest")])]),t._v(", "),e("strong",[e("code",[t._v("overwrite")])]),t._v("="),e("em",[e("code",[t._v("False")])]),t._v(", "),e("strong",[e("code",[t._v("pbar")])]),t._v("="),e("em",[e("code",[t._v("None")])]),t._v(", "),e("strong",[e("code",[t._v("show_progress")])]),t._v("="),e("em",[e("code",[t._v("True")])]),t._v(", "),e("strong",[e("code",[t._v("chunk_size")])]),t._v("="),e("em",[e("code",[t._v("1048576")])]),t._v(", "),e("strong",[e("code",[t._v("timeout")])]),t._v("="),e("em",[e("code",[t._v("4")])]),t._v(", "),e("strong",[e("code",[t._v("retries")])]),t._v("="),e("em",[e("code",[t._v("5")])]),t._v(")")])]),t._v(" "),e("p",[t._v("Download "),e("code",[t._v("url")]),t._v(" to "),e("code",[t._v("dest")]),t._v(" unless it exists and not "),e("code",[t._v("overwrite")])]),t._v(" "),e("p",[t._v("The "),e("RouterLink",{attrs:{to:"/data.external.html#download_url"}},[e("code",[t._v("download_url")])]),t._v(" is a very handy function inside fastai! This function can be used to download any file from the internet to a location passed by "),e("code",[t._v("dest")]),t._v(" argument of the function. It should not be confused, that this function can only be used to download fastai-files. That couldn't be further away from the truth. As an example, let's download the pets dataset from the actual source file:")],1),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("fname "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dog.jpg"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nurl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://i.insider.com/569fdd9ac08a80bd448b7138?width=1100&format=jpeg&auto=webp"')]),t._v("\ndownload_url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Let's confirm that the file was indeed downloaded correctly.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" PIL "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Image\n")])])]),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("im "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nplt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("im"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:"output_28_0.png",alt:"png"}})]),t._v(" "),e("p",[t._v("As can be seen, the file has been downloaded to the local path provided in "),e("code",[t._v("dest")]),t._v(" argument. Calling the function again doesn't trigger a download since the file is already there. This can be confirmed by checking that the last modified time of the file that is downloaded doesn't get updated.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" last_modified_time "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getmtime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndownload_url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntest_eq"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getmtime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" last_modified_time"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("We can also use the "),e("RouterLink",{attrs:{to:"/data.external.html#download_url"}},[e("code",[t._v("download_url")])]),t._v(" function to download the pet's dataset straight from the source by simply passing "),e("code",[t._v("https://www.robots.ox.ac.uk/~vgg/data/pets/data/images.tar.gz")]),t._v(" in "),e("code",[t._v("url")]),t._v(".")],1),t._v(" "),e("h4",{staticClass:"doc_header",attrs:{id:"download_data"}},[e("code",[t._v("download_data")]),e("a",{staticClass:"source_link",staticStyle:{float:"right"},attrs:{href:"https://github.com/fastai/fastai/tree/master/fastai/data/external.py#L188"}},[t._v("[source]")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("download_data")]),t._v("("),e("strong",[e("code",[t._v("url")])]),t._v(", "),e("strong",[e("code",[t._v("fname")])]),t._v("="),e("em",[e("code",[t._v("None")])]),t._v(", "),e("strong",[e("code",[t._v("c_key")])]),t._v("="),e("em",[e("code",[t._v("'archive'")])]),t._v(", "),e("strong",[e("code",[t._v("force_download")])]),t._v("="),e("em",[e("code",[t._v("False")])]),t._v(")")])]),t._v(" "),e("p",[t._v("Download "),e("code",[t._v("url")]),t._v(" to "),e("code",[t._v("fname")]),t._v(".")]),t._v(" "),e("p",[t._v("The "),e("RouterLink",{attrs:{to:"/data.external.html#download_data"}},[e("code",[t._v("download_data")])]),t._v(" is a convenience function and a wrapper outside "),e("RouterLink",{attrs:{to:"/data.external.html#download_url"}},[e("code",[t._v("download_url")])]),t._v(" to download fastai files to the appropriate local path based on the "),e("code",[t._v("c_key")]),t._v(".")],1),t._v(" "),e("p",[t._v("If "),e("code",[t._v("fname")]),t._v(" is None, it will default to the archive folder you have in your config file (or data, model if you specify a different "),e("code",[t._v("c_key")]),t._v(") followed by the last part of the url: for instance "),e("RouterLink",{attrs:{to:"/data.external.html#URLs.MNIST_SAMPLE"}},[e("code",[t._v("URLs.MNIST_SAMPLE")])]),t._v(" is "),e("code",[t._v("http://files.fast.ai/data/examples/mnist_sample.tgz")]),t._v(" and the default value for "),e("code",[t._v("fname")]),t._v(" will be "),e("code",[t._v("~/.fastai/archive/mnist_sample.tgz")]),t._v(".")],1),t._v(" "),e("p",[t._v("If "),e("code",[t._v("force_download=True")]),t._v(", the file is alwayd downloaded. Otherwise, it's only when the file doesn't exists that the download is triggered.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("_get_check"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PASCAL_2007"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("_get_check"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PASCAL_2012"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("([1637796771, '433b4706eb7c42bd74e7f784e3fdf244'],\n [2618908000, 'd90e29e54a4c76c0c6fba8355dcbaca5'])\n")])])]),e("h3",{attrs:{id:"extract"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#extract"}},[t._v("#")]),t._v(" Extract")]),t._v(" "),e("h4",{staticClass:"doc_header",attrs:{id:"file_extract"}},[e("code",[t._v("file_extract")]),e("a",{staticClass:"source_link",staticStyle:{float:"right"},attrs:{href:"https://github.com/fastai/fastai/tree/master/fastai/data/external.py#L215"}},[t._v("[source]")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("file_extract")]),t._v("("),e("strong",[e("code",[t._v("fname")])]),t._v(", "),e("strong",[e("code",[t._v("dest")])]),t._v("="),e("em",[e("code",[t._v("None")])]),t._v(")")])]),t._v(" "),e("p",[t._v("Extract "),e("code",[t._v("fname")]),t._v(" to "),e("code",[t._v("dest")]),t._v(" using "),e("code",[t._v("tarfile")]),t._v(" or "),e("code",[t._v("zipfile")]),t._v(".")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/data.external.html#file_extract"}},[e("code",[t._v("file_extract")])]),t._v(" is used by default in "),e("RouterLink",{attrs:{to:"/data.external.html#untar_data"}},[e("code",[t._v("untar_data")])]),t._v(" to decompress the downloaded file.")],1),t._v(" "),e("h4",{staticClass:"doc_header",attrs:{id:"newest_folder"}},[e("code",[t._v("newest_folder")]),e("a",{staticClass:"source_link",staticStyle:{float:"right"},attrs:{href:"https://github.com/fastai/fastai/tree/master/fastai/data/external.py#L231"}},[t._v("[source]")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("newest_folder")]),t._v("("),e("strong",[e("code",[t._v("path")])]),t._v(")")])]),t._v(" "),e("p",[t._v("Return newest folder on path")]),t._v(" "),e("h4",{staticClass:"doc_header",attrs:{id:"rename_extracted"}},[e("code",[t._v("rename_extracted")]),e("a",{staticClass:"source_link",staticStyle:{float:"right"},attrs:{href:"https://github.com/fastai/fastai/tree/master/fastai/data/external.py#L237"}},[t._v("[source]")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("rename_extracted")]),t._v("("),e("strong",[e("code",[t._v("dest")])]),t._v(")")])]),t._v(" "),e("p",[t._v("Rename file if different from dest")]),t._v(" "),e("p",[t._v("let's rename the untar/unzip data if dest name is different from fname")]),t._v(" "),e("h4",{staticClass:"doc_header",attrs:{id:"untar_data"}},[e("code",[t._v("untar_data")]),e("a",{staticClass:"source_link",staticStyle:{float:"right"},attrs:{href:"https://github.com/fastai/fastai/tree/master/fastai/data/external.py#L243"}},[t._v("[source]")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("untar_data")]),t._v("("),e("strong",[e("code",[t._v("url")])]),t._v(", "),e("strong",[e("code",[t._v("fname")])]),t._v("="),e("em",[e("code",[t._v("None")])]),t._v(", "),e("strong",[e("code",[t._v("dest")])]),t._v("="),e("em",[e("code",[t._v("None")])]),t._v(", "),e("strong",[e("code",[t._v("c_key")])]),t._v("="),e("em",[e("code",[t._v("'data'")])]),t._v(", "),e("strong",[e("code",[t._v("force_download")])]),t._v("="),e("em",[e("code",[t._v("False")])]),t._v(", "),e("strong",[e("code",[t._v("extract_func")])]),t._v("="),e("em",[e("code",[t._v("file_extract")])]),t._v(")")])]),t._v(" "),e("p",[t._v("Download "),e("code",[t._v("url")]),t._v(" to "),e("code",[t._v("fname")]),t._v(" if "),e("code",[t._v("dest")]),t._v(" doesn't exist, and un-tgz or unzip to folder "),e("code",[t._v("dest")]),t._v(".")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/data.external.html#untar_data"}},[e("code",[t._v("untar_data")])]),t._v(" is a very powerful convenience function to download files from "),e("code",[t._v("url")]),t._v(" to "),e("code",[t._v("dest")]),t._v(". The "),e("code",[t._v("url")]),t._v(" can be a default "),e("code",[t._v("url")]),t._v(" from the "),e("RouterLink",{attrs:{to:"/data.external.html#URLs"}},[e("code",[t._v("URLs")])]),t._v(" class or a custom url. If "),e("code",[t._v("dest")]),t._v(" is not passed, files are downloaded at the "),e("code",[t._v("default_dest")]),t._v(" which defaults to "),e("code",[t._v("~/.fastai/data/")]),t._v(".")],1),t._v(" "),e("p",[t._v("This convenience function extracts the downloaded files to "),e("code",[t._v("dest")]),t._v(" by default. In order, to simply download the files without extracting, pass the "),e("code",[t._v("noop")]),t._v(" function as "),e("code",[t._v("extract_func")]),t._v(".")]),t._v(" "),e("p",[t._v("Note, it is also possible to pass a custom "),e("code",[t._v("extract_func")]),t._v(" to "),e("RouterLink",{attrs:{to:"/data.external.html#untar_data"}},[e("code",[t._v("untar_data")])]),t._v(" if the filetype doesn't end with "),e("code",[t._v(".tgz")]),t._v(" or "),e("code",[t._v(".zip")]),t._v(". The "),e("code",[t._v("gzip")]),t._v(" and "),e("code",[t._v("zip")]),t._v(" files are supported by default and there is no need to pass custom "),e("code",[t._v("extract_func")]),t._v(" for these type of files.")],1),t._v(" "),e("p",[t._v("Internally, if files are not available at "),e("code",[t._v("fname")]),t._v(" location already which defaults to "),e("code",[t._v("~/.fastai/archive/")]),t._v(", the files get downloaded at "),e("code",[t._v("~/.fastai/archive")]),t._v(" and are then extracted at "),e("code",[t._v("dest")]),t._v(" location. If no "),e("code",[t._v("dest")]),t._v(" is passed the "),e("code",[t._v("default_dest")]),t._v(" to download the files is "),e("code",[t._v("~/.fastai/data")]),t._v(". If files are already available at the "),e("code",[t._v("fname")]),t._v(" location but not available then a symbolic link is created for each file from "),e("code",[t._v("fname")]),t._v(" location to "),e("code",[t._v("dest")]),t._v(".")]),t._v(" "),e("p",[t._v("Also, if "),e("code",[t._v("force_download")]),t._v(" is set to "),e("code",[t._v("True")]),t._v(", files are re downloaded even if they exist.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" tempfile "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" TemporaryDirectory\n")])])]),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("test_eq"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("untar_data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MNIST_SAMPLE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mnist_sample'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" TemporaryDirectory"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" d"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    d "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    dest "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" untar_data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MNIST_TINY"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fname"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mnist_tiny.tgz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dest"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("d"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" force_download"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" Path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mnist_tiny.tgz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mnist_tiny'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("unlink"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mnist_tiny.tgz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Test c_key")]),t._v("\ntst_model "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mnist_sample'")]),t._v("\ntest_eq"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("untar_data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MNIST_SAMPLE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c_key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'model'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tst_model"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" tst_model"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("with_suffix"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.tgz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Archive wasn't downloaded in the models path")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("archive"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mnist_sample.tgz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Archive was downloaded there")]),t._v("\nshutil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rmtree"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tst_model"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Sometimes the extracted folder does not have the same name as the downloaded file.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" TemporaryDirectory"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" d"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    d "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    untar_data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("URLs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MNIST_TINY"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fname"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mnist_tiny.tgz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dest"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("d"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" force_download"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    Path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mnist_tiny.tgz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rename"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nims_tini.tgz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    p "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nims_tini.tgz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    dest "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nims_tini'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assert")]),t._v(" p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    file_extract"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    rename_extracted"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("unlink"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    shutil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rmtree"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);